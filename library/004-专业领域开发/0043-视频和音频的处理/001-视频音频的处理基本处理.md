#   视频音频的处理基本处理
>维护人员：**liuyang**  
>创建时间：2017-03-16   

### Ⅰ.FFmpeg是什么？
>　　FFmpeg是一套可以用来记录、转换数字音频、视频,并能将其转化为流的开源计算机程序。FFMPEG堪称自由软件中最完备的一套多媒体支持库，它几乎实现了所有当下常见的数据封装格式、多媒体传输协议以及音视频编解码器。FFmpeg在Linux平台下开发,但它同样也可以在其它操作系统环境中编译运行,包括Windows、Mac OS X等。

### Ⅱ.FFmpeg作用？
　　FFmpeg有非常强大的功能包括视频采集功能、视频格式转换、视频抓图、给视频加水印等，核心功能作用如下:
##### 视音频读取时长
>　　ffmpeg可以对视音频的时长进行读取。

##### 视频采集功能
>　　ffmpeg视频采集功能非常强大,不仅可以采集视频采集卡或USB摄像头的图像,还可
以进行屏幕录制,同时还支持以RTP方式将视频流传送给支持RTSP的流媒体服务器,支持直播应用。

##### 视频格式转换功能
> 　　ffmpeg视频转换功能。视频格式转换,比如可以将多种视频格式转换为flv格式,可不是视频信号转换 。ffmpeg可以轻易地实现多种视频格式之间的相互转换(wma,rm,avi,mod等),例如可以将摄录下的视频avi等转成视频网站所采用的flv格式。

##### 视频截图功能
>　　对于选定的视频,截取指定时间的缩略图。视频抓图,获取静态图和动态图,不提倡抓gif文件;因为抓出的gif文件大而播放不流畅。

##### 给视频加水印功能
>　　使用ffmpeg 视频添加水印(logo)。

### Ⅱ.使用FFmpeg读取视音频时长
 >判断当前程序运行环境  
 String os = System.getProperties().getProperty("os.name");  
 boolean falg = os.toLowerCase().startsWith("win")

#### 　　windows环境下java语言使用
###### 1.下载ffmpeg.exe
　[下载地址](http://www.ffmpeg.org/download.html)
###### 2.java代码
```java
/**
	 * 获取视频总时间
	 * @param viedo_path    视频路径
	 * @param ffmpeg_path	ffmpeg路径
	 * @return int 毫秒
	 */
	public static int getVideoTime(String video_path, String ffmpeg_path) {
		List<String> commands = new java.util.ArrayList<String>();
		commands.add(ffmpeg_path);
		commands.add("-i");
		commands.add(video_path);
		try {
			ProcessBuilder builder = new ProcessBuilder();
			builder.command(commands);
			final Process p = builder.start();
			//从输入流中读取视频信息
			BufferedReader br = new BufferedReader(new InputStreamReader(p.getErrorStream()));
			StringBuffer sb = new StringBuffer();
			String line = "";
			while ((line = br.readLine()) != null) {
				sb.append(line);
			}
			br.close();
			//从视频信息中解析时长
			//System.out.println(sb.toString());
			String regexDuration = "Duration: (.*?), start: (.*?), bitrate: (\\d*) kb\\/s";
			Pattern pattern = Pattern.compile(regexDuration);
			Matcher m = pattern.matcher(sb.toString());
			if (m.find()) {
				int time = getTimelen(m.group(1));
				//System.out.println(video_path + ",\n视频时长：" + time + ", \n开始时间：" + m.group(2) + ",\n比特率：" + m.group(3) + "kb/s");
				return time;
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
		return 0;
	}
```
#### 　　Linux环境下java语言使用
###### 1.下载ffmpeg.exe
　[下载地址](http://www.ffmpeg.org/download.html)
###### 2.java代码
